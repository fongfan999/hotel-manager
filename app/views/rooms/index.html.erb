<%= title("Rooms") %>

<header>
	<h2>Listing Rooms</h2>
	
	<% admins_only do %>
		<ul class="actions">
			<li><%= link_to "New Room", new_admin_room_path, class: "new" %></li>
		</ul>
	<% end %>
</header>

<% if @rooms.present? %>
	<div class="listing-index icon-only">
		<table>
			<thead>
				<tr>
					<th>No.</th>
					<th>ID</th>
					<th>Name</th>
					<th>Type</th>
					<th>Status</th>
					<% if user_signed_in? && current_user.admin? %>
						<th>Actions</th>
					<% end %>
				</tr>
			</thead>
			<tbody>
				<% @rooms.each_with_index do |room, index| %>
				<tr>
					<td class="padding-top-15"><%= link_to index + 1, room %></td>
					<td class="padding-top-15"><%= room.to_code %></td>
					<td class="padding-top-15"><%= room.name %></td>
					<td><%= render room.type %></td>
					<td>
						<span class="label_type room_status-<%= room.status.
							parameterize %>">
							<%= room.status %>
						</span>
					</td>
					<% admins_only do %>
						<td>
							<%= link_to "", [:edit, :admin, room], class: "edit" %>
							<% if room.status == "Available" %>
								<%= link_to "", [:admin, room], class: "delete",
									method: :delete,
									data: { confirm: "Are you sure to delete this room?" } %>
							<% end %>
						</td>
					<% end %>
				</tr>
				<% end %>
			</tbody>
		</table>
	</div>
<% else %>
	<p>There is nothing to show.</p>
<% end %>

<% admins_only do %>
<div class="listing-index icon-only">
	<table>
		<thead>
			<tr>
				<th>No.</th>
				<th>Type</th>
				<th>Price</th>
				<th>Quantity</th>
			</tr>
		</thead>
		<tbody>
			<% RoomType.all.each_with_index do |type, index| %>
			<tr>
				<td class="padding-top-15"><%= index + 1 %></td>
				<td><%= render type %></td>
				<td><%= format_money(type.cost) %></td>
				<td><%= type.quantity %></td>
			</tr>
			<% end %>
		</tbody>
	</table>
</div>
<% end %>

<%= link_to "Back", :back, class: "back" %>